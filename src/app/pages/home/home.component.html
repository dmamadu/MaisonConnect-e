<!-- Fond dynamique -->
<div class="absolute inset-0 bg-gradient-to-br  from-gray-50 to-gray-100 dark:from-gray-950 dark:to-black -z-10"></div>

<!-- Section Maison Connectée -->
<app-smart-home-section></app-smart-home-section>

<!-- Hero Section -->
<section class="relative px-4 md:px-6 lg:px-8 py-20 lg:py-32 max-w-7xl mx-auto">
  <div class="grid lg:grid-cols-2 gap-12 items-center">
    <!-- Texte -->
    <div class="space-y-6 animate-fade-up">
      <h1 class="text-5xl lg:text-7xl font-extrabold text-gray-900 dark:text-white leading-tight">
        {{ 'home.hero.title' | translate }}
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-400 max-w-xl">
        {{ 'home.hero.subtitle' | translate }}
      </p>
      <div class="flex flex-wrap gap-4 pt-4">
        <a routerLink="/shop" 
           class="px-8 py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full hover:bg-gray-800 dark:hover:bg-gray-100 transition-all duration-300 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105">
          {{ 'home.hero.shop' | translate }}
        </a>
        <a routerLink="/services" 
           class="px-8 py-4 border-2 border-gray-900 dark:border-white text-gray-900 dark:text-white rounded-full hover:bg-gray-900 hover:text-white dark:hover:bg-white dark:hover:text-gray-900 transition-all duration-300 font-semibold">
          {{ 'home.hero.services' | translate }}
        </a>
      </div>
    </div>

    <!-- Image Hero -->
    <div class="relative group">
      <div class="absolute -inset-4 bg-gradient-to-r from-gray-900/20 to-gray-600/20 dark:from-white/10 dark:to-gray-400/10 rounded-3xl blur-2xl group-hover:blur-3xl transition-all duration-500"></div>
      <div class="relative">
        <img src="https://i.pinimg.com/736x/5e/77/2e/5e772e92c7f101602a981b4c32b05e4f.jpg" 
             alt="Maison connectée" 
             class="w-full h-96 object-cover rounded-3xl shadow-2xl transform group-hover:scale-105 transition-transform duration-500"/>
      </div>
    </div>
  </div>
</section>

<!-- Section Produits Vedettes -->
<section class="px-4 md:px-6 lg:px-8 py-20 max-w-7xl mx-auto">
  <div class="text-center mb-12">
    <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-4">
      {{ 'home.products.title' | translate }}
    </h2>
    <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
      Découvrez nos produits les plus populaires
    </p>
  </div>

  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let p of products; let i = index" 
         class="group bg-white dark:bg-gray-900 rounded-2xl shadow-md hover:shadow-2xl overflow-hidden transition-all duration-300 transform hover:-translate-y-2 animate-fade-up border border-gray-100 dark:border-gray-800"
         [style.animationDelay]="delayForIndex(i)">
      <div class="relative h-56 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 overflow-hidden">
        <img [src]="p.image" 
             [alt]="p.title" 
             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"/>
      </div>
      <div class="p-6">
        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">{{ p.title }}</h3>
        <p class="text-gray-600 dark:text-gray-400 mb-4">{{ p.description }}</p>
        <div class="flex items-center justify-between">
          <span class="text-2xl font-extrabold text-gray-900 dark:text-white">{{ p.price }}</span>
          <a href="" routerLink="/shop">
          <button class="px-4 py-2 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-full hover:bg-gray-900 hover:text-white dark:hover:bg-white dark:hover:text-gray-900 transition-all duration-300 font-medium">
            Voir
          </button>
          </a>

        </div>
      </div>
    </div>
  </div>
</section>

<!-- Section Packs -->
<section class="px-4 md:px-6 lg:px-8 py-20 bg-gray-100 dark:bg-gray-900/50">
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-4">
        {{ 'home.packs.title' | translate }}
      </h2>
      <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
        Des solutions complètes pour tous vos besoins
      </p>
    </div>

    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let pack of packs; let i = index" 
           class="bg-white dark:bg-gray-900 rounded-2xl shadow-md hover:shadow-2xl p-6 transition-all duration-300 transform hover:-translate-y-2 animate-fade-up border border-gray-200 dark:border-gray-800"
           [style.animationDelay]="delayForIndex(i)">
        <div class="h-48 mb-4 rounded-xl overflow-hidden bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900">
          <img [src]="pack.image" 
               [alt]="pack.title" 
               class="w-full h-full object-cover hover:scale-110 transition-transform duration-500"/>
        </div>
        <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">{{ pack.title }}</h3>
        <p class="text-gray-600 dark:text-gray-400 mb-4">{{ pack.description }}</p>
        <span class="text-2xl font-extrabold text-gray-900 dark:text-white block">{{ pack.price }}</span>
      </div>
    </div>
  </div>
</section>

<!-- Section Services -->
<section class="px-4 md:px-6 lg:px-8 py-20 max-w-7xl mx-auto">
  <div class="text-center mb-12">
    <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-4">
      {{ 'home.services.title' | translate }}
    </h2>
    <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
      Des services professionnels adaptés à vos besoins
    </p>
  </div>

  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <div *ngFor="let s of services; let i = index" 
         class="bg-white dark:bg-gray-900 rounded-2xl shadow-md hover:shadow-xl p-8 transition-all duration-300 transform hover:-translate-y-2 animate-fade-up border border-gray-100 dark:border-gray-800"
         [style.animationDelay]="delayForIndex(i)">
      <div class="w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center text-4xl mb-6">
        {{ s.icon }}
      </div>
      <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">{{ s.title }}</h3>
      <p class="text-gray-600 dark:text-gray-400 mb-4">{{ s.description }}</p>
      <ul *ngIf="s.highlights?.length" class="space-y-2">
        <li *ngFor="let h of s.highlights" class="flex items-start gap-2 text-gray-700 dark:text-gray-300">
          <svg class="w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
          </svg>
          <span>{{ h }}</span>
        </li>
      </ul>
    </div>
  </div>
</section>

<!-- Section Réalisations (Carousel) -->
<section class="px-4 md:px-6 lg:px-8 py-20 bg-gray-100 dark:bg-gray-900/50">
  <div class="max-w-6xl mx-auto">
    <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-12 text-center">
      {{ 'home.realizations.title' | translate }}
    </h2>
    
    <div class="relative overflow-hidden rounded-3xl shadow-2xl">
      <div class="carousel-track flex transition-transform duration-500" 
           [style.transform]="'translateX(-' + currentIndex * 100 + '%)'">
        <div class="carousel-item flex-shrink-0 w-full relative" *ngFor="let p of products">
          <img [src]="p.image" 
               [alt]="p.title" 
               class="w-full h-96 object-cover"/>
          <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-8">
            <h3 class="text-2xl font-bold text-white">{{ p.title }}</h3>
            <p class="text-gray-200 mt-2">{{ p.description }}</p>
          </div>
        </div>
      </div>
      
      <!-- Contrôles -->
      <button (click)="prev()" 
              class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 dark:bg-black/80 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white dark:hover:bg-black transition-all shadow-lg">
        <svg class="w-6 h-6 text-gray-900 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>
      <button (click)="next()" 
              class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 dark:bg-black/80 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white dark:hover:bg-black transition-all shadow-lg">
        <svg class="w-6 h-6 text-gray-900 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>

      <!-- Indicateurs -->
      <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
        <button *ngFor="let p of products; let i = index" 
                (click)="currentIndex = i"
                class="w-2 h-2 rounded-full transition-all duration-300"
                [class.bg-white]="i === currentIndex"
                [class.w-8]="i === currentIndex"
                ></button>
      </div>
    </div>
  </div>
</section>

<!-- Section Témoignages -->
<section class="px-4 md:px-6 lg:px-8 py-20 max-w-7xl mx-auto">
  <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-12 text-center">
    {{ 'home.testimonials.title' | translate }}
  </h2>

  <div class="relative overflow-hidden">
    <div class="carousel-track flex transition-transform duration-500" 
         [style.transform]="'translateX(-' + testimonialIndex * 100 + '%)'">
      <div class="carousel-item flex-shrink-0 w-full px-4" *ngFor="let t of testimonials">
        <div class="bg-white dark:bg-gray-900 rounded-3xl shadow-xl p-10 max-w-4xl mx-auto border border-gray-100 dark:border-gray-800">
          <div class="flex flex-col items-center text-center">
            <img *ngIf="t.avatar" 
                 [src]="t.avatar" 
                 [alt]="t.name" 
                 class="w-20 h-20 rounded-full mb-6 object-cover border-4 border-gray-100 dark:border-gray-800"/>
            <svg class="w-12 h-12 text-gray-300 dark:text-gray-700 mb-4" fill="currentColor" viewBox="0 0 24 24">
              <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
            </svg>
            <p class="text-xl text-gray-700 dark:text-gray-300 italic mb-6 leading-relaxed">
              "{{ t.content }}"
            </p>
            <span class="font-bold text-lg text-gray-900 dark:text-white">{{ t.name }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Contrôles -->
    <button (click)="prevTestimonial()" 
            class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white dark:bg-gray-900 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-all shadow-lg">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    <button (click)="nextTestimonial()" 
            class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white dark:bg-gray-900 rounded-full flex items-center justify-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-all shadow-lg">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>

    <!-- Indicateurs -->
    <div class="flex justify-center gap-2 mt-8">
      <button *ngFor="let t of testimonials; let i = index" 
              (click)="testimonialIndex = i"
              class="w-2 h-2 rounded-full transition-all duration-300"
              [class.bg-gray-900]="i === testimonialIndex"
              [class.dark:bg-white]="i === testimonialIndex"
              [class.w-8]="i === testimonialIndex"
              [class.bg-gray-300]="i !== testimonialIndex"
              [class.dark:bg-gray-700]="i !== testimonialIndex"></button>
    </div>
  </div>
</section>

<!-- Section Articles -->
<!-- <section class="px-4 md:px-6 lg:px-8 py-20 bg-gray-100 dark:bg-gray-900/50">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-12 text-center">
      {{ 'home.inspire.title' | translate }}
    </h2>

    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <article *ngFor="let a of articles" 
               class="group bg-white dark:bg-gray-900 rounded-2xl shadow-md hover:shadow-xl overflow-hidden transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-800">
        <div class="h-56 overflow-hidden">
          <img [src]="a.image" 
               [alt]="a.title" 
               class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"/>
        </div>
        <div class="p-6">
          <span class="text-sm text-gray-500 dark:text-gray-400 font-medium">{{ a.date }}</span>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mt-2 mb-3">{{ a.title }}</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-4">{{ a.summary }}</p>
          <a href="#" class="inline-flex items-center gap-2 text-gray-900 dark:text-white font-semibold hover:gap-3 transition-all">
            {{ 'home.inspire.readMore' | translate }}
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </article>
    </div>
  </div>
</section> -->
<section class="px-4 md:px-6 lg:px-8 py-20 bg-gray-100 dark:bg-gray-900/50">
  <div class="max-w-7xl mx-auto">
    <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-12 text-center">
      {{ 'home.inspire.title' | translate }}
    </h2>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <article *ngFor="let a of articles" 
               class="group bg-white dark:bg-gray-900 rounded-2xl shadow-md hover:shadow-xl overflow-hidden transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-800">
        <div class="h-56 overflow-hidden">
          <img [src]="a.image" [alt]="a.title" 
               class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"/>
        </div>
        <div class="p-6">
          <span class="text-sm text-gray-500 dark:text-gray-400 font-medium">{{ a.date }}</span>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mt-2 mb-3">{{ a.title }}</h3>
          <p class="text-gray-600 dark:text-gray-400 mb-4">{{ a.summary }}</p>
          <a [routerLink]="['/article', a.id]" 
             class="inline-flex items-center gap-2 text-gray-900 dark:text-white font-semibold hover:gap-3 transition-all">
            {{ 'home.inspire.readMore' | translate }}
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- Section Pourquoi Nous -->
<section class="px-4 md:px-6 lg:px-8 py-20 max-w-7xl mx-auto">
  <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-12 text-center">
    {{ 'home.whyUs.title' | translate }}
  </h2>

  <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
    <div *ngFor="let w of whyUs" 
         class="bg-white dark:bg-gray-900 rounded-2xl shadow-md hover:shadow-xl p-8 text-center transition-all duration-300 transform hover:-translate-y-2 border border-gray-100 dark:border-gray-800">
      <div class="w-20 h-20 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 text-5xl">
        {{ w.icon }}
      </div>
      <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">{{ w.title }}</h3>
      <p class="text-gray-600 dark:text-gray-400">{{ w.description }}</p>
    </div>
  </div>
</section>

<!-- Section FAQ -->
<section class="px-4 md:px-6 lg:px-8 py-20 bg-gray-100 dark:bg-gray-900/50">
  <div class="max-w-4xl mx-auto">
    <h2 class="text-4xl lg:text-5xl font-extrabold text-gray-900 dark:text-white mb-4 text-center">
      {{ 'home.faqs.title' | translate }}
    </h2>
    <p class="text-center text-gray-600 dark:text-gray-400 mb-12 text-lg">
      {{ 'home.faqs.subtitle' | translate }}
    </p>

    <div class="space-y-4">
      <div *ngFor="let faq of faqs; let i = index" 
           class="bg-white dark:bg-gray-900 rounded-2xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-800">
        <button
          (click)="toggleFAQ(i)"
          class="w-full flex justify-between items-center p-6 text-left hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"
        >
          <span class="font-bold text-lg text-gray-900 dark:text-white pr-4">{{ faq.question }}</span>
          <svg class="w-6 h-6 text-gray-500 dark:text-gray-400 transform transition-transform duration-300 flex-shrink-0"
               [class.rotate-180]="openFAQIndex === i"
               fill="none" 
               stroke="currentColor" 
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <div [@faqAnimation]="openFAQIndex === i ? 'open' : 'closed'"
             class="overflow-hidden">
          <p class="px-6 pb-6 text-gray-600 dark:text-gray-400 leading-relaxed">
            {{ faq.answer || ('home.smartHome.faqs.answerComingSoon' | translate) }}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Animations CSS -->
<style>
  @keyframes fade-up {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  .animate-fade-up {
    animation: fade-up 0.5s ease forwards;
  }
</style>